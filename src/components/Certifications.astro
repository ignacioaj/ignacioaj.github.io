---
import Card from "../components/Card.astro";
import courses from "../assets/collections/courses.json";
import certifications from "../assets/collections/certifications.json";

interface Course {
  title: string;
  subtitle: string;
  pathImage?: string;
  pathFile: string;
}

interface Certification {
  name: string;
  institution: string;
  date?: string;
  pathImage?: string;
}

interface Props {
  className?: string;
}

const { className = "" } = Astro.props;

const certificationsList = certifications as Certification[];
const coursesList = courses as Course[];

function randomDelay() {
  const delay = Math.random() * 0.5;
  return `${delay.toFixed(2)}s`;
}
---

<section
  id="certifications"
  class={`relative w-full flex flex-col items-center justify-center py-16 bg-center bg-cover ${className}`}
  style="background-image: linear-gradient(to bottom, rgba(0,0,0,0.7), rgba(0,0,0,0)),
                                linear-gradient(to top, rgba(0,0,0,0.7), rgba(0,0,0,0)),
                                url('/fondo-certifications.jpg');"
>
  <div class="section-content flex flex-col items-center text-center px-4 py-16 md:py-24 max-w-6xl w-full space-y-12">

    <h2 class="text-3xl md:text-5xl font-bold text-white title-futuristic">
      Certifications & Courses
    </h2>

    <!-- CERTIFICATIONS CARD -->
    <!-- UNCOMMENT
    <Card>
      <h3 class="text-xl font-semibold text-white mb-4">Certifications</h3>

      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        {certificationsList.map(cert => (
          <div
            class="cert-card relative flex flex-col items-center justify-start p-4 pt-5 w-52 h-72 rounded-xl bg-gray-900/50"
            style={`--delay: ${randomDelay()};`}
          >
            <div class="shimmer absolute top-0 left-0 w-full h-full pointer-events-none"></div>

            {cert.pathImage && (
              <img
                src={cert.pathImage}
                alt={cert.institution}
                class="w-16 h-16 object-contain mb-6 mt-3 z-10"
              />
            )}

            <div class="text-content flex flex-col gap-2 text-center z-10 mt-6">
              <span class="font-bold text-cyan-400">{cert.institution}</span>
              <span class="font-medium text-white">{cert.name}</span>
              {cert.date && (
                <span class="text-gray-400 text-sm">{cert.date}</span>
              )}
            </div>
          </div>
        ))}
      </div>
    </Card>
    -->

    <!-- COURSES CARD -->
    <Card className="w-full p-4 flex flex-col gap-6">
      <h3 class="text-xl font-semibold text-white mb-4">Courses</h3>

      <ul class="flex flex-col gap-4 w-full text-left">
        {coursesList.map(course => (
          <li>
            <a
              href={course.pathFile}
              download
              class="course-item flex items-center gap-4 w-full p-3 rounded-lg"
            >
              {course.pathImage && (
                <img
                  src={course.pathImage}
                  alt={course.title}
                  class="w-10 h-10 object-contain shrink-0"
                />
              )}

              <div class="flex flex-col">
                <span class="font-medium text-white">{course.title}</span>
                <span class="text-gray-400 text-sm">{course.subtitle}</span>
              </div>
            </a>
          </li>
        ))}
      </ul>
    </Card>

  </div>
</section>

<style>
.course-item {
  background: rgba(31, 41, 55, 0.35);
  border: 1px solid rgba(255, 255, 255, 0.05);
  transition: background 0.25s ease, border-color 0.25s ease, transform 0.25s ease;
}
.course-item:hover {
  background: rgba(31, 41, 55, 0.55);
  border-color: rgba(34, 211, 238, 0.3);
  transform: translateY(-1px);
}

.title-futuristic {
  position: relative;
  display: inline-block;
}
.title-futuristic::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -6px;
  width: 50%;
  height: 4px;
  background: linear-gradient(90deg, #0ff, #2CA3A3);
  border-radius: 2px;
  transform: skewX(-20deg);
  transition: width 0.3s ease;
}
.title-futuristic:hover::after {
  width: 70%;
}

.cert-card {
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.5s forwards;
  animation-delay: var(--delay);
  border: 1.5px solid rgba(0, 255, 255, 0.5);
  overflow: hidden;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.shimmer {
  left: -150%;
  width: 50%;
  background: linear-gradient(
    120deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.3) 50%,
    rgba(255, 255, 255, 0) 100%
  );
  transform: skewX(-20deg);
  animation: shimmer 4s linear infinite;
  animation-delay: var(--delay);
  z-index: 20;
}

@keyframes shimmer {
  0% { left: -150%; }
  100% { left: 150%; }
}
</style>
