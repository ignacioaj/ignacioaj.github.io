---
// ScrollTop.astro
---
<button
  id="scroll-top-btn"
  aria-label="Subir al inicio"
  title="Subir al inicio"
  class="fixed right-5 bottom-5 w-12 h-12 md:w-14 md:h-14 rounded-full bg-white/5 backdrop-blur-md flex items-center justify-center shadow-lg opacity-0 pointer-events-none transform translate-y-5 transition-all duration-200 z-50 hover:shadow-xl"
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="w-6 h-6 md:w-7 md:h-7 text-teal-400 transition-transform duration-200"
    fill="currentColor"
    viewBox="0 0 24 24"
  >
    <path d="M12 4l-8 8h6v8h4v-8h6z" />
  </svg>
</button>

<script type="module">
  // Esperamos a que el DOM estÃ© cargado
  document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById('scroll-top-btn');
    if (!btn) return;

    const SHOW_AFTER = 300;

    const updateVisibility = () => {
      if (window.scrollY > SHOW_AFTER) {
        btn.classList.remove('opacity-0', 'pointer-events-none', 'translate-y-5');
        btn.classList.add('opacity-100', 'pointer-events-auto', 'translate-y-0');
      } else {
        btn.classList.add('opacity-0', 'pointer-events-none', 'translate-y-5');
        btn.classList.remove('opacity-100', 'pointer-events-auto', 'translate-y-0');
      }
    };

    // Mostrar/ocultar al cargar
    updateVisibility();

    // Escuchar scroll
    window.addEventListener('scroll', updateVisibility, { passive: true });

    // Scroll al top
    btn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  });
</script>
